import{_ as $,R as ee,k as te,c as se,d as ae,e as ne,g as le,a as re}from"../chunks/firebase.ee006204.js";import{H as oe}from"../chunks/control.f5b05b5f.js";import{s as W,f as g,a as x,l as y,g as b,h as L,c as M,m as A,d,O as T,j as f,i as q,L as _,n as N,P as F,R as ie,M as ce,B as ue}from"../chunks/scheduler.300f34fd.js";import{S as X,i as Y,a as I,c as fe,t as z,b as he,d as me,m as _e,e as de,g as pe}from"../chunks/index.93d9ee7e.js";import{e as J}from"../chunks/each.e59479a4.js";function K(r,e){return new oe(r,e)}new TextEncoder;const ge=async({params:r})=>{var o,a;const e=$(ne,"users"),t=ee(e,se("username","==",r.username),te(1)),i=await ae(t),h=(o=i.docs[0])==null?void 0:o.exists(),s=(a=i.docs[0])==null?void 0:a.data();if(!h)throw K(404,"that user does not exist!");if(!s.published)throw K(403,`The profile of @${s.username} is not public!`);return{username:s.username,photoURL:s.photoURL,bio:s.bio,links:s.links??[]}},je=Object.freeze(Object.defineProperty({__proto__:null,load:ge},Symbol.toStringTag,{value:"Module"}));function be(r){let e,t,i,h,s,o;return{c(){e=g("a"),t=g("img"),h=x(),s=g("span"),o=y(r[2]),this.h()},l(a){e=b(a,"A",{href:!0,class:!0});var c=L(e);t=b(c,"IMG",{src:!0,alt:!0,width:!0,height:!0,class:!0}),h=M(c),s=b(c,"SPAN",{class:!0});var k=L(s);o=A(k,r[2]),k.forEach(d),c.forEach(d),this.h()},h(){T(t.src,i=`/${r[0]}.png`)||f(t,"src",i),f(t,"alt",r[0]),f(t,"width","32"),f(t,"height","32"),f(t,"class","w-8"),f(s,"class","text-lg text-white font-bold"),f(e,"href",r[1]),f(e,"class","stack w-full max-w-md text-center bg-base-300 flex justify-center items-center p-4 rounded-lg not-prose no-underline")},m(a,c){q(a,e,c),_(e,t),_(e,h),_(e,s),_(s,o)},p(a,[c]){c&1&&!T(t.src,i=`/${a[0]}.png`)&&f(t,"src",i),c&1&&f(t,"alt",a[0]),c&4&&N(o,a[2]),c&2&&f(e,"href",a[1])},i:F,o:F,d(a){a&&d(e)}}}function ke(r,e,t){let{icon:i="default"}=e,{url:h="foo"}=e,{title:s="some cool title"}=e;return r.$$set=o=>{"icon"in o&&t(0,i=o.icon),"url"in o&&t(1,h=o.url),"title"in o&&t(2,s=o.title)},[i,h,s]}class ve extends X{constructor(e){super(),Y(this,e,ke,be,W,{icon:0,url:1,title:2})}}function Q(r,e,t){const i=r.slice();return i[1]=e[t],i}function V(r){let e,t,i,h;const s=[r[1]];let o={};for(let a=0;a<s.length;a+=1)o=ue(o,s[a]);return t=new ve({props:o}),{c(){e=g("li"),he(t.$$.fragment),i=x(),this.h()},l(a){e=b(a,"LI",{class:!0});var c=L(e);me(t.$$.fragment,c),i=M(c),c.forEach(d),this.h()},h(){f(e,"class","my-2")},m(a,c){q(a,e,c),_e(t,e,null),_(e,i),h=!0},p(a,c){const k=c&1?le(s,[re(a[1])]):{};t.$set(k)},i(a){h||(I(t.$$.fragment,a),h=!0)},o(a){z(t.$$.fragment,a),h=!1},d(a){a&&d(e),de(t)}}}function we(r){let e,t,i,h,s,o,a,c=r[0].username+"",k,H,p,P,O,R,j=(r[0].bio??"no bio yet...")+"",S,B,w,v;document.title=e="@"+r[0].username+" Links";let E=J(r[0].links),u=[];for(let n=0;n<E.length;n+=1)u[n]=V(Q(r,E,n));const Z=n=>z(u[n],1,1,()=>{u[n]=null});return{c(){t=g("meta"),h=x(),s=g("main"),o=g("h1"),a=y("@"),k=y(c),H=x(),p=g("img"),O=x(),R=g("p"),S=y(j),B=x(),w=g("ul");for(let n=0;n<u.length;n+=1)u[n].c();this.h()},l(n){const m=ie("svelte-2pftis",document.head);t=b(m,"META",{name:!0,content:!0}),m.forEach(d),h=M(n),s=b(n,"MAIN",{class:!0});var l=L(s);o=b(l,"H1",{class:!0});var U=L(o);a=A(U,"@"),k=A(U,c),U.forEach(d),H=M(l),p=b(l,"IMG",{src:!0,alt:!0,width:!0,class:!0}),O=M(l),R=b(l,"P",{class:!0});var C=L(R);S=A(C,j),C.forEach(d),B=M(l),w=b(l,"UL",{class:!0});var D=L(w);for(let G=0;G<u.length;G+=1)u[G].l(D);D.forEach(d),l.forEach(d),this.h()},h(){f(t,"name","description"),f(t,"content",i=r[0].bio),f(o,"class","text-7xl text-purple-500"),T(p.src,P=r[0].photoURL??"/user.png")||f(p,"src",P),f(p,"alt","photoURL"),f(p,"width","256"),f(p,"class","mx-auto"),f(R,"class","text-xl my-8"),f(w,"class","list-none"),f(s,"class","prose text-center mx-auto mt-8")},m(n,m){_(document.head,t),q(n,h,m),q(n,s,m),_(s,o),_(o,a),_(o,k),_(s,H),_(s,p),_(s,O),_(s,R),_(R,S),_(s,B),_(s,w);for(let l=0;l<u.length;l+=1)u[l]&&u[l].m(w,null);v=!0},p(n,[m]){if((!v||m&1)&&e!==(e="@"+n[0].username+" Links")&&(document.title=e),(!v||m&1&&i!==(i=n[0].bio))&&f(t,"content",i),(!v||m&1)&&c!==(c=n[0].username+"")&&N(k,c),(!v||m&1&&!T(p.src,P=n[0].photoURL??"/user.png"))&&f(p,"src",P),(!v||m&1)&&j!==(j=(n[0].bio??"no bio yet...")+"")&&N(S,j),m&1){E=J(n[0].links);let l;for(l=0;l<E.length;l+=1){const U=Q(n,E,l);u[l]?(u[l].p(U,m),I(u[l],1)):(u[l]=V(U),u[l].c(),I(u[l],1),u[l].m(w,null))}for(pe(),l=E.length;l<u.length;l+=1)Z(l);fe()}},i(n){if(!v){for(let m=0;m<E.length;m+=1)I(u[m]);v=!0}},o(n){u=u.filter(Boolean);for(let m=0;m<u.length;m+=1)z(u[m]);v=!1},d(n){n&&(d(h),d(s)),d(t),ce(u,n)}}}function Ee(r,e,t){let{data:i}=e;return r.$$set=h=>{"data"in h&&t(0,i=h.data)},[i]}class Pe extends X{constructor(e){super(),Y(this,e,Ee,we,W,{data:0})}}export{Pe as component,je as universal};
