import{s as N,z as D,a as R,c as x,i as p,d as $,f as k,g as P,h as j,O as F,j as d,L,l as E,m as O,U as I,F as T,N as V}from"../chunks/scheduler.300f34fd.js";import{S as y,i as z,b as h,d as b,m as w,a as v,t as U,e as C}from"../chunks/index.93d9ee7e.js";import{g as H,I as J}from"../chunks/input.6f741474.js";import{A as K}from"../chunks/AuthCheck.689186b5.js";import{b as Q,u as W,r as X,l as Y,m as Z,n as ee,o as S,f as A,e as q}from"../chunks/firebase.ee006204.js";import{v as G}from"../chunks/index.72792d10.js";import{C as te,a as se,b as re,c as ae,d as oe}from"../chunks/card-title.f7eab975.js";import{C as ne}from"../chunks/card-footer.251a499f.js";import{L as le}from"../chunks/label.f429c1cf.js";function fe(f){let e;return{c(){e=E("Profile Picture")},l(s){e=O(s,"Profile Picture")},m(s,t){p(s,e,t)},d(s){s&&$(e)}}}function ie(f){let e;return{c(){e=E("Upload a profile picture for your account.")},l(s){e=O(s,"Upload a profile picture for your account.")},m(s,t){p(s,e,t)},d(s){s&&$(e)}}}function ue(f){let e,s,t,a;return e=new ae({props:{class:"text-xl",$$slots:{default:[fe]},$$scope:{ctx:f}}}),t=new oe({props:{$$slots:{default:[ie]},$$scope:{ctx:f}}}),{c(){h(e.$$.fragment),s=R(),h(t.$$.fragment)},l(r){b(e.$$.fragment,r),s=x(r),b(t.$$.fragment,r)},m(r,l){w(e,r,l),p(r,s,l),w(t,r,l),a=!0},p(r,l){const o={};l&64&&(o.$$scope={dirty:l,ctx:r}),e.$set(o);const n={};l&64&&(n.$$scope={dirty:l,ctx:r}),t.$set(n)},i(r){a||(v(e.$$.fragment,r),v(t.$$.fragment,r),a=!0)},o(r){U(e.$$.fragment,r),U(t.$$.fragment,r),a=!1},d(r){r&&$(s),C(e,r),C(t,r)}}}function ce(f){let e;return{c(){e=E("Picture")},l(s){e=O(s,"Picture")},m(s,t){p(s,e,t)},d(s){s&&$(e)}}}function M(f){let e,s="Uploading...",t,a;return{c(){e=k("p"),e.textContent=s,t=R(),a=k("progress"),this.h()},l(r){e=P(r,"P",{["data-svelte-h"]:!0}),V(e)!=="svelte-be0b5h"&&(e.textContent=s),t=x(r),a=P(r,"PROGRESS",{class:!0}),j(a).forEach($),this.h()},h(){d(a,"class","progress progress-info w-56 mt-6")},m(r,l){p(r,e,l),p(r,t,l),p(r,a,l)},d(r){r&&($(e),$(t),$(a))}}}function $e(f){let e,s,t,a,r,l,o,n,i,m;l=new le({props:{for:"photoURL",$$slots:{default:[ce]},$$scope:{ctx:f}}}),n=new J({props:{name:"photoURL",type:"file",class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",accept:"image/png, image/jpeg, image/gif, image/webp"}}),n.$on("change",f[4]);let c=f[1]&&M();return{c(){e=k("form"),s=k("div"),t=k("img"),r=R(),h(l.$$.fragment),o=R(),h(n.$$.fragment),i=R(),c&&c.c(),this.h()},l(u){e=P(u,"FORM",{class:!0});var _=j(e);s=P(_,"DIV",{class:!0});var g=j(s);t=P(g,"IMG",{src:!0,alt:!0,width:!0,height:!0,class:!0}),r=x(g),b(l.$$.fragment,g),o=x(g),b(n.$$.fragment,g),i=x(g),c&&c.l(g),g.forEach($),_.forEach($),this.h()},h(){var u;F(t.src,a=f[0]??((u=f[3])==null?void 0:u.photoURL)??"/user.jpeg")||d(t,"src",a),d(t,"alt","photoURL"),d(t,"width","128"),d(t,"height","128"),d(t,"class","mx-auto rounded-lg mb-8"),d(s,"class","form-control w-full max-w-xs mx-auto text-center"),d(e,"class","max-w-screen-md w-full mx-auto")},m(u,_){p(u,e,_),L(e,s),L(s,t),L(s,r),w(l,s,null),L(s,o),w(n,s,null),L(s,i),c&&c.m(s,null),m=!0},p(u,_){var B;(!m||_&9&&!F(t.src,a=u[0]??((B=u[3])==null?void 0:B.photoURL)??"/user.jpeg"))&&d(t,"src",a);const g={};_&64&&(g.$$scope={dirty:_,ctx:u}),l.$set(g),u[1]?c||(c=M(),c.c(),c.m(s,null)):c&&(c.d(1),c=null)},i(u){m||(v(l.$$.fragment,u),v(n.$$.fragment,u),m=!0)},o(u){U(l.$$.fragment,u),U(n.$$.fragment,u),m=!1},d(u){u&&$(e),C(l),C(n),c&&c.d()}}}function me(f){let e,s,t,a,r,l,o;return{c(){e=k("a"),s=E("Back"),t=R(),a=k("button"),r=E("Finish"),this.h()},l(n){e=P(n,"A",{href:!0,class:!0});var i=j(e);s=O(i,"Back"),i.forEach($),t=x(n),a=P(n,"BUTTON",{class:!0});var m=j(a);r=O(m,"Finish"),m.forEach($),this.h()},h(){d(e,"href","/signup/username"),d(e,"class",G({variant:"outline"})),d(a,"class",G({variant:"outline"})),I(a,"btn-disabled",!f[2])},m(n,i){p(n,e,i),L(e,s),p(n,t,i),p(n,a,i),L(a,r),l||(o=T(a,"click",f[5]),l=!0)},p(n,i){i&4&&I(a,"btn-disabled",!n[2])},d(n){n&&($(e),$(t),$(a)),l=!1,o()}}}function pe(f){let e,s,t,a,r,l;return e=new se({props:{$$slots:{default:[ue]},$$scope:{ctx:f}}}),t=new re({props:{$$slots:{default:[$e]},$$scope:{ctx:f}}}),r=new ne({props:{class:"border-t px-6 py-4 flex justify-between",$$slots:{default:[me]},$$scope:{ctx:f}}}),{c(){h(e.$$.fragment),s=R(),h(t.$$.fragment),a=R(),h(r.$$.fragment)},l(o){b(e.$$.fragment,o),s=x(o),b(t.$$.fragment,o),a=x(o),b(r.$$.fragment,o)},m(o,n){w(e,o,n),p(o,s,n),w(t,o,n),p(o,a,n),w(r,o,n),l=!0},p(o,n){const i={};n&64&&(i.$$scope={dirty:n,ctx:o}),e.$set(i);const m={};n&75&&(m.$$scope={dirty:n,ctx:o}),t.$set(m);const c={};n&68&&(c.$$scope={dirty:n,ctx:o}),r.$set(c)},i(o){l||(v(e.$$.fragment,o),v(t.$$.fragment,o),v(r.$$.fragment,o),l=!0)},o(o){U(e.$$.fragment,o),U(t.$$.fragment,o),U(r.$$.fragment,o),l=!1},d(o){o&&($(s),$(a)),C(e,o),C(t,o),C(r,o)}}}function de(f){let e,s;return e=new te({props:{class:"w-full",$$slots:{default:[pe]},$$scope:{ctx:f}}}),{c(){h(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,a){w(e,t,a),s=!0},p(t,a){const r={};a&79&&(r.$$scope={dirty:a,ctx:t}),e.$set(r)},i(t){s||(v(e.$$.fragment,t),s=!0)},o(t){U(e.$$.fragment,t),s=!1},d(t){C(e,t)}}}function ge(f){let e,s;return e=new K({props:{$$slots:{default:[de]},$$scope:{ctx:f}}}),{c(){h(e.$$.fragment)},l(t){b(e.$$.fragment,t)},m(t,a){w(e,t,a),s=!0},p(t,[a]){const r={};a&79&&(r.$$scope={dirty:a,ctx:t}),e.$set(r)},i(t){s||(v(e.$$.fragment,t),s=!0)},o(t){U(e.$$.fragment,t),s=!1},d(t){C(e,t)}}}function _e(f,e,s){let t,a;D(f,Q,i=>s(2,t=i)),D(f,W,i=>s(3,a=i));let r,l=!1;async function o(i){s(1,l=!0);const m=i.target.files[0];s(0,r=URL.createObjectURL(m));const c=X(Y,`users/${t.uid}/profile.png`),u=await Z(c,m),_=await ee(u.ref);await S(A(q,"users",t.uid),{photoURL:_}),s(1,l=!1)}async function n(){await S(A(q,"users",t.uid),{signupCompleted:!0}),H("/")}return[r,l,t,a,o,n]}class ke extends y{constructor(e){super(),z(this,e,_e,ge,N,{})}}export{ke as component};
