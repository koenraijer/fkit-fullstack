import{s as Z,f as d,l as k,a as H,g as f,h as A,m as B,d as v,c as D,C as K,j as b,i as $,y as o,I as tt,n as q,z as Q,x as et}from"../chunks/scheduler.e4fe527f.js";import{S as at,i as rt}from"../chunks/index.bdfbb633.js";import{p as ot}from"../chunks/stores.f8473358.js";import{p as st}from"../chunks/parse.bee59afc.js";import{j as nt,k as lt}from"../chunks/singletons.c557ba60.js";const it=nt("invalidate_all");function ct(t){return lt.apply_action(t)}function ut(t){const e=JSON.parse(t);return e.data&&(e.data=st(e.data)),e}function W(t){return HTMLElement.prototype.cloneNode.call(t)}function mt(t,e=()=>{}){const i=async({action:a,result:s,reset:u})=>{s.type==="success"&&(u!==!1&&HTMLFormElement.prototype.reset.call(t),await it()),(location.origin+location.pathname===a.origin+a.pathname||s.type==="redirect"||s.type==="error")&&ct(s)};async function h(a){var E,T,M,c;if(((E=a.submitter)!=null&&E.hasAttribute("formmethod")?a.submitter.formMethod:W(t).method)!=="post")return;a.preventDefault();const u=new URL((T=a.submitter)!=null&&T.hasAttribute("formaction")?a.submitter.formAction:W(t).action),m=new FormData(t),_=(M=a.submitter)==null?void 0:M.getAttribute("name");_&&m.append(_,((c=a.submitter)==null?void 0:c.getAttribute("value"))??"");const L=new AbortController;let y=!1;const P=await e({action:u,cancel:()=>y=!0,controller:L,get data(){return m},formData:m,get form(){return t},formElement:t,submitter:a.submitter})??i;if(y)return;let l;try{const r=await fetch(u,{method:"POST",headers:{accept:"application/json","x-sveltekit-action":"true"},cache:"no-store",body:m,signal:L.signal});l=ut(await r.text()),l.type==="error"&&(l.status=r.status)}catch(r){if((r==null?void 0:r.name)==="AbortError")return;l={type:"error",error:r}}P({action:u,get data(){return m},formData:m,get form(){return t},formElement:t,update:r=>i({action:u,result:l,reset:r==null?void 0:r.reset}),result:l})}return HTMLFormElement.prototype.addEventListener.call(t,"submit",h),{destroy(){HTMLFormElement.prototype.removeEventListener.call(t,"submit",h)}}}function pt(t){var X;let e,i,h,a,s=t[0].bio+"",u,m,_,L,y=t[1].status+"",S,P,l,E=(((X=t[1].form)==null?void 0:X.problem)??"")+"",T,M,c,r,g,z='<span class="label-text">Your bio</span>',j,x,F,I,C,J="Update Bio",R,V;return{c(){e=d("main"),i=d("p"),h=k("Current Bio: "),a=d("span"),u=k(s),m=H(),_=d("p"),L=k("Status Code: "),S=k(y),P=H(),l=d("p"),T=k(E),M=H(),c=d("form"),r=d("div"),g=d("label"),g.innerHTML=z,j=H(),x=d("textarea"),I=H(),C=d("button"),C.textContent=J,this.h()},l(p){e=f(p,"MAIN",{class:!0});var n=A(e);i=f(n,"P",{});var w=A(i);h=B(w,"Current Bio: "),a=f(w,"SPAN",{class:!0});var Y=A(a);u=B(Y,s),Y.forEach(v),w.forEach(v),m=D(n),_=f(n,"P",{});var U=A(_);L=B(U,"Status Code: "),S=B(U,y),U.forEach(v),P=D(n),l=f(n,"P",{class:!0});var G=A(l);T=B(G,E),G.forEach(v),M=D(n),c=f(n,"FORM",{method:!0});var N=A(c);r=f(N,"DIV",{class:!0});var O=A(r);g=f(O,"LABEL",{for:!0,class:!0,["data-svelte-h"]:!0}),K(g)!=="svelte-18jsnk2"&&(g.innerHTML=z),j=D(O),x=f(O,"TEXTAREA",{name:!0,class:!0}),A(x).forEach(v),O.forEach(v),I=D(N),C=f(N,"BUTTON",{class:!0,["data-svelte-h"]:!0}),K(C)!=="svelte-tqnit3"&&(C.textContent=J),N.forEach(v),n.forEach(v),this.h()},h(){b(a,"class","text-info"),b(l,"class","text-error"),b(g,"for","bio"),b(g,"class","label"),b(x,"name","bio"),b(x,"class","textarea textarea-bordered textarea-accent"),x.value=F=t[0].bio,b(r,"class","form-control"),b(C,"class","btn btn-primary my-5"),b(c,"method","POST"),b(e,"class","max-w-lg prose text-center mx-auto my-6")},m(p,n){$(p,e,n),o(e,i),o(i,h),o(i,a),o(a,u),o(e,m),o(e,_),o(_,L),o(_,S),o(e,P),o(e,l),o(l,T),o(e,M),o(e,c),o(c,r),o(r,g),o(r,j),o(r,x),o(c,I),o(c,C),R||(V=tt(mt.call(null,c)),R=!0)},p(p,[n]){var w;n&1&&s!==(s=p[0].bio+"")&&q(u,s),n&2&&y!==(y=p[1].status+"")&&q(S,y),n&2&&E!==(E=(((w=p[1].form)==null?void 0:w.problem)??"")+"")&&q(T,E),n&1&&F!==(F=p[0].bio)&&(x.value=F)},i:Q,o:Q,d(p){p&&v(e),R=!1,V()}}}function dt(t,e,i){let h;et(t,ot,s=>i(1,h=s));let{data:a}=e;return t.$$set=s=>{"data"in s&&i(0,a=s.data)},[a,h]}class yt extends at{constructor(e){super(),rt(this,e,dt,pt,Z,{data:0})}}export{yt as component};
