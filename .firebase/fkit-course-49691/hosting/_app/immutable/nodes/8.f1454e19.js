import{s as I,x as S,f as d,a as L,l as O,g as _,C as M,c as R,h as $,d as f,m as T,j as r,F as j,i as x,y as w,M as q}from"../chunks/scheduler.e4fe527f.js";import{S as B,i as D,b as G,d as N,m as V,a as z,t as J,e as K}from"../chunks/index.bdfbb633.js";import{A as Q}from"../chunks/AuthCheck.a70a9fb2.js";import{a as W,u as X,r as Y,i as Z,l as ee,n as te,e as se,g as ae,c as le}from"../chunks/firebase.bfe19b46.js";function H(c){let t,o="Uploading...",s,a;return{c(){t=d("p"),t.textContent=o,s=L(),a=d("progress"),this.h()},l(e){t=_(e,"P",{["data-svelte-h"]:!0}),M(t)!=="svelte-be0b5h"&&(t.textContent=o),s=R(e),a=_(e,"PROGRESS",{class:!0}),$(a).forEach(f),this.h()},h(){r(a,"class","progress progress-info w-56 mt-6")},m(e,n){x(e,t,n),x(e,s,n),x(e,a,n)},d(e){e&&(f(t),f(s),f(a))}}}function re(c){let t,o="Upload a Profile Photo",s,a,e,n,b,U,u,v='<span class="label-text">Pick a file</span>',C,h,y,P,g,k,E,A,i=c[2]&&H();return{c(){t=d("h2"),t.textContent=o,s=L(),a=d("form"),e=d("div"),n=d("img"),U=L(),u=d("label"),u.innerHTML=v,C=L(),h=d("input"),y=L(),i&&i.c(),P=L(),g=d("a"),k=O("Finish"),this.h()},l(l){t=_(l,"H2",{class:!0,["data-svelte-h"]:!0}),M(t)!=="svelte-1whglfv"&&(t.textContent=o),s=R(l),a=_(l,"FORM",{class:!0});var p=$(a);e=_(p,"DIV",{class:!0});var m=$(e);n=_(m,"IMG",{src:!0,alt:!0,width:!0,height:!0,class:!0}),U=R(m),u=_(m,"LABEL",{for:!0,class:!0,["data-svelte-h"]:!0}),M(u)!=="svelte-1186g42"&&(u.innerHTML=v),C=R(m),h=_(m,"INPUT",{name:!0,type:!0,class:!0,accept:!0}),y=R(m),i&&i.l(m),m.forEach(f),p.forEach(f),P=R(l),g=_(l,"A",{href:!0,class:!0});var F=$(g);k=T(F,"Finish"),F.forEach(f),this.h()},h(){var l;r(t,"class","card-title"),j(n.src,b=c[1]??((l=c[0])==null?void 0:l.photoURL)??"/user.png")||r(n,"src",b),r(n,"alt","photoURL"),r(n,"width","256"),r(n,"height","256"),r(n,"class","mx-auto"),r(u,"for","photoURL"),r(u,"class","label"),r(h,"name","photoURL"),r(h,"type","file"),r(h,"class","file-input file-input-bordered w-full max-w-xs"),r(h,"accept","image/png, image/jpeg, image/gif, image/webp"),r(e,"class","form-control w-full max-w-xs my-10 mx-auto text-center"),r(a,"class","max-w-screen-md w-full"),r(g,"href",c[3]),r(g,"class","btn btn-primary")},m(l,p){x(l,t,p),x(l,s,p),x(l,a,p),w(a,e),w(e,n),w(e,U),w(e,u),w(e,C),w(e,h),w(e,y),i&&i.m(e,null),x(l,P,p),x(l,g,p),w(g,k),E||(A=q(h,"change",c[4]),E=!0)},p(l,p){var m;p&3&&!j(n.src,b=l[1]??((m=l[0])==null?void 0:m.photoURL)??"/user.png")&&r(n,"src",b),l[2]?i||(i=H(),i.c(),i.m(e,null)):i&&(i.d(1),i=null),p&8&&r(g,"href",l[3])},d(l){l&&(f(t),f(s),f(a),f(P),f(g)),i&&i.d(),E=!1,A()}}}function ne(c){let t,o;return t=new Q({props:{$$slots:{default:[re]},$$scope:{ctx:c}}}),{c(){G(t.$$.fragment)},l(s){N(t.$$.fragment,s)},m(s,a){V(t,s,a),o=!0},p(s,[a]){const e={};a&79&&(e.$$scope={dirty:a,ctx:s}),t.$set(e)},i(s){o||(z(t.$$.fragment,s),o=!0)},o(s){J(t.$$.fragment,s),o=!1},d(s){K(t,s)}}}function oe(c,t,o){let s,a,e;S(c,W,u=>o(5,a=u)),S(c,X,u=>o(0,e=u));let n,b=!1;async function U(u){o(2,b=!0);const v=u.target.files[0];o(1,n=URL.createObjectURL(v));const C=Y(Z,`users/${a.uid}/profile.png`),h=await ee(C,v),y=await te(h.ref);await se(ae(le,"users",a.uid),{photoURL:y}),o(2,b=!1)}return c.$$.update=()=>{c.$$.dirty&1&&o(3,s=`/${e==null?void 0:e.username}/edit`)},[e,n,b,s,U]}class pe extends B{constructor(t){super(),D(this,t,oe,ne,I,{})}}export{pe as component};
