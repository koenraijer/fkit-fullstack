import{_ as V,R as W,k as X,b as Y,d as Z,c as ee}from"../chunks/firebase.bfe19b46.js";import{H as te}from"../chunks/control.f5b05b5f.js";import{s as se,f as v,a as U,l as P,E as ae,g as E,d,c as x,h as y,m as A,j as _,F as C,y as f,i as G,n as F,G as ne,H as le}from"../chunks/scheduler.e4fe527f.js";import{S as oe,i as re,a as M,c as ie,t as O,b as ce,d as ue,m as me,e as he,g as _e}from"../chunks/index.bdfbb633.js";import{e as N,U as fe,g as pe,a as de}from"../chunks/UserLink.19c93fd7.js";function D(i,n){return new te(i,n)}new TextEncoder;const ge=async({params:i})=>{var m,o;const n=V(ee,"users"),l=W(n,Y("username","==",i.username),X(1)),c=await Z(l),u=(m=c.docs[0])==null?void 0:m.exists(),s=(o=c.docs[0])==null?void 0:o.data();if(!u)throw D(404,"that user does not exist!");if(!s.published)throw D(403,`The profile of @${s.username} is not public!`);return{username:s.username,photoURL:s.photoURL,bio:s.bio,links:s.links??[]}},Re=Object.freeze(Object.defineProperty({__proto__:null,load:ge},Symbol.toStringTag,{value:"Module"}));function J(i,n,l){const c=i.slice();return c[1]=n[l],c}function K(i){let n,l,c,u;const s=[i[1]];let m={};for(let o=0;o<s.length;o+=1)m=le(m,s[o]);return l=new fe({props:m}),{c(){n=v("li"),ce(l.$$.fragment),c=U(),this.h()},l(o){n=E(o,"LI",{class:!0});var h=y(n);ue(l.$$.fragment,h),c=x(h),h.forEach(d),this.h()},h(){_(n,"class","my-2")},m(o,h){G(o,n,h),me(l,n,null),f(n,c),u=!0},p(o,h){const L=h&1?pe(s,[de(o[1])]):{};l.$set(L)},i(o){u||(M(l.$$.fragment,o),u=!0)},o(o){O(l.$$.fragment,o),u=!1},d(o){o&&d(n),he(l)}}}function be(i){let n,l,c,u,s,m,o,h=i[0].username+"",L,S,p,j,T,$,R=(i[0].bio??"no bio yet...")+"",H,q,b,g;document.title=n="@"+i[0].username+" Links";let k=N(i[0].links),a=[];for(let e=0;e<k.length;e+=1)a[e]=K(J(i,k,e));const Q=e=>O(a[e],1,1,()=>{a[e]=null});return{c(){l=v("meta"),u=U(),s=v("main"),m=v("h1"),o=P("@"),L=P(h),S=U(),p=v("img"),T=U(),$=v("p"),H=P(R),q=U(),b=v("ul");for(let e=0;e<a.length;e+=1)a[e].c();this.h()},l(e){const r=ae("svelte-2pftis",document.head);l=E(r,"META",{name:!0,content:!0}),r.forEach(d),u=x(e),s=E(e,"MAIN",{class:!0});var t=y(s);m=E(t,"H1",{class:!0});var w=y(m);o=A(w,"@"),L=A(w,h),w.forEach(d),S=x(t),p=E(t,"IMG",{src:!0,alt:!0,width:!0,class:!0}),T=x(t),$=E(t,"P",{class:!0});var z=y($);H=A(z,R),z.forEach(d),q=x(t),b=E(t,"UL",{class:!0});var B=y(b);for(let I=0;I<a.length;I+=1)a[I].l(B);B.forEach(d),t.forEach(d),this.h()},h(){_(l,"name","description"),_(l,"content",c=i[0].bio),_(m,"class","text-7xl text-purple-500"),C(p.src,j=i[0].photoURL??"/user.png")||_(p,"src",j),_(p,"alt","photoURL"),_(p,"width","256"),_(p,"class","mx-auto"),_($,"class","text-xl my-8"),_(b,"class","list-none"),_(s,"class","prose text-center mx-auto mt-8")},m(e,r){f(document.head,l),G(e,u,r),G(e,s,r),f(s,m),f(m,o),f(m,L),f(s,S),f(s,p),f(s,T),f(s,$),f($,H),f(s,q),f(s,b);for(let t=0;t<a.length;t+=1)a[t]&&a[t].m(b,null);g=!0},p(e,[r]){if((!g||r&1)&&n!==(n="@"+e[0].username+" Links")&&(document.title=n),(!g||r&1&&c!==(c=e[0].bio))&&_(l,"content",c),(!g||r&1)&&h!==(h=e[0].username+"")&&F(L,h),(!g||r&1&&!C(p.src,j=e[0].photoURL??"/user.png"))&&_(p,"src",j),(!g||r&1)&&R!==(R=(e[0].bio??"no bio yet...")+"")&&F(H,R),r&1){k=N(e[0].links);let t;for(t=0;t<k.length;t+=1){const w=J(e,k,t);a[t]?(a[t].p(w,r),M(a[t],1)):(a[t]=K(w),a[t].c(),M(a[t],1),a[t].m(b,null))}for(_e(),t=k.length;t<a.length;t+=1)Q(t);ie()}},i(e){if(!g){for(let r=0;r<k.length;r+=1)M(a[r]);g=!0}},o(e){a=a.filter(Boolean);for(let r=0;r<a.length;r+=1)O(a[r]);g=!1},d(e){e&&(d(u),d(s)),d(l),ne(a,e)}}}function ke(i,n,l){let{data:c}=n;return i.$$set=u=>{"data"in u&&l(0,c=u.data)},[c]}class Ue extends oe{constructor(n){super(),re(this,n,ke,be,se,{data:0})}}export{Ue as component,Re as universal};
