import{z as F,J as Qt,K as Gt,s as jt,e as ht,i as D,d as m,L as Jt,f as y,g as C,C as Q,j as _,h as R,r as Kt,a as S,c as B,D as xt,y as k,M,N as mt,u as Yt,v as Wt,w as Xt,O as At,x as ut,l as Z,m as tt,n as Pt,H as Zt,P as te,B as ee,Q as Tt,R as at,G as le}from"../chunks/scheduler.e4fe527f.js";import{n as se,l as ne,h as ae,j as ie,S as Mt,i as Vt,g as bt,t as J,c as gt,a as H,b as zt,d as qt,m as Ft,e as Ht}from"../chunks/index.bdfbb633.js";import{e as dt,u as re,f as oe,U as ue,g as ce,a as fe}from"../chunks/UserLink.19c93fd7.js";import{p as he}from"../chunks/stores.f8473358.js";import{u as de,a as _e,g as ct,c as ft,m as pe,e as pt,Q as me,j as be}from"../chunks/firebase.bfe19b46.js";import{c as ge}from"../chunks/index.40b40403.js";import{w as ve}from"../chunks/index.10b7c612.js";function ke(l,t,e,s){if(!t)return F;const a=l.getBoundingClientRect();if(t.left===a.left&&t.right===a.right&&t.top===a.top&&t.bottom===a.bottom)return F;const{delay:r=0,duration:o=300,easing:u=Qt,start:n=se()+r,end:f=n+o,tick:g=F,css:L}=e(l,{from:t,to:a},s);let i=!0,c=!1,d;function j(){L&&(d=ae(l,0,1,o,r,u,L)),r||(c=!0)}function I(){L&&ie(l,d),i=!1}return ne(N=>{if(!c&&N>=n&&(c=!0),c&&N>=f&&(g(1,0),I()),!i)return!1;if(c){const U=N-n,A=0+1*u(U/o);g(A,1-A)}return!0}),j(),g(0,1),I}function ye(l){const t=getComputedStyle(l);if(t.position!=="absolute"&&t.position!=="fixed"){const{width:e,height:s}=t,a=l.getBoundingClientRect();l.style.position="absolute",l.style.width=e,l.style.height=s,Ce(l,a)}}function Ce(l,t){const e=l.getBoundingClientRect();if(t.left!==e.left||t.top!==e.top){const s=getComputedStyle(l),a=s.transform==="none"?"":s.transform;l.style.transform=`${a} translate(${t.left-e.left}px, ${t.top-e.top}px)`}}function we(l,{from:t,to:e},s={}){const a=getComputedStyle(l),r=a.transform==="none"?"":a.transform,[o,u]=a.transformOrigin.split(" ").map(parseFloat),n=t.left+t.width*o/e.width-(e.left+o),f=t.top+t.height*u/e.height-(e.top+u),{delay:g=0,duration:L=c=>Math.sqrt(c)*120,easing:i=ge}=s;return{delay:g,duration:Gt(L)?L(Math.sqrt(n*n+f*f)):L,easing:i,css:(c,d)=>{const j=d*n,I=d*f,N=c+d*t.width/e.width,U=c+d*t.height/e.height;return`transform: ${r} translate(${j}px, ${I}px) scale(${N}, ${U});`}}}function Dt(l,t,e){const s=l.slice();return s[9]=t[e],s[11]=e,s}const Le=l=>({item:l&1,index:l&1}),It=l=>({item:l[9],index:l[11]});function Ee(l){let t,e="No items";return{c(){t=y("p"),t.textContent=e,this.h()},l(s){t=C(s,"P",{class:!0,["data-svelte-h"]:!0}),Q(t)!=="svelte-1jmwi8z"&&(t.textContent=e),this.h()},h(){_(t,"class","text-center my-12 text-lg font-bold")},m(s,a){D(s,t,a)},p:F,i:F,o:F,d(s){s&&m(t)}}}function xe(l){let t,e=[],s=new Map,a,r=dt(l[0]);const o=u=>u[9].id;for(let u=0;u<r.length;u+=1){let n=Dt(l,r,u),f=o(n);s.set(f,e[u]=Nt(f,n))}return{c(){t=y("ul");for(let u=0;u<e.length;u+=1)e[u].c();this.h()},l(u){t=C(u,"UL",{class:!0});var n=R(t);for(let f=0;f<e.length;f+=1)e[f].l(n);n.forEach(m),this.h()},h(){_(t,"class","list-none p-0 flex flex-col items-center")},m(u,n){D(u,t,n);for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(t,null);a=!0},p(u,n){if(n&63){r=dt(u[0]),bt();for(let f=0;f<e.length;f+=1)e[f].r();e=re(e,n,o,1,u,r,s,t,oe,Nt,null,Dt);for(let f=0;f<e.length;f+=1)e[f].a();gt()}},i(u){if(!a){for(let n=0;n<r.length;n+=1)H(e[n]);a=!0}},o(u){for(let n=0;n<e.length;n+=1)J(e[n]);a=!1},d(u){u&&m(t);for(let n=0;n<e.length;n+=1)e[n].d()}}}function Nt(l,t){let e,s,a,r,o,u=F,n,f,g;const L=t[6].default,i=Kt(L,t,t[5],It);return{key:l,first:null,c(){e=y("li"),i&&i.c(),s=S(),this.h()},l(c){e=C(c,"LI",{class:!0,"data-index":!0,"data-id":!0,draggable:!0});var d=R(e);i&&i.l(d),s=B(d),d.forEach(m),this.h()},h(){_(e,"class","border-2 border-dashed border-transparent p-2 transition-all max-w-md w-full svelte-1kgq1po"),_(e,"data-index",a=t[11]),_(e,"data-id",r=t[9].id),_(e,"draggable","true"),xt(e,"over",t[9].id===t[1]),this.first=e},m(c,d){D(c,e,d),i&&i.m(e,null),k(e,s),n=!0,f||(g=[M(e,"dragstart",Te),M(e,"dragover",mt(t[2])),M(e,"dragleave",t[3]),M(e,"drop",mt(t[4]))],f=!0)},p(c,d){t=c,i&&i.p&&(!n||d&33)&&Yt(i,L,t,t[5],n?Xt(L,t[5],d,Le):Wt(t[5]),It),(!n||d&1&&a!==(a=t[11]))&&_(e,"data-index",a),(!n||d&1&&r!==(r=t[9].id))&&_(e,"data-id",r),(!n||d&3)&&xt(e,"over",t[9].id===t[1])},r(){o=e.getBoundingClientRect()},f(){ye(e),u()},a(){u(),u=ke(e,o,we,{duration:300})},i(c){n||(H(i,c),n=!0)},o(c){J(i,c),n=!1},d(c){c&&m(e),i&&i.d(c),f=!1,At(g)}}}function Pe(l){let t,e,s,a;const r=[xe,Ee],o=[];function u(n,f){var g;return(g=n[0])!=null&&g.length?0:1}return t=u(l),e=o[t]=r[t](l),{c(){e.c(),s=ht()},l(n){e.l(n),s=ht()},m(n,f){o[t].m(n,f),D(n,s,f),a=!0},p(n,[f]){let g=t;t=u(n),t===g?o[t].p(n,f):(bt(),J(o[g],1,1,()=>{o[g]=null}),gt(),e=o[t],e?e.p(n,f):(e=o[t]=r[t](n),e.c()),H(e,1),e.m(s.parentNode,s))},i(n){a||(H(e),a=!0)},o(n){J(e),a=!1},d(n){n&&m(s),o[t].d(n)}}}function it(l){return l.dataset.index?{...l.dataset}:it(l.parentNode)}function Te(l){var e;const t=it(l.target);(e=l.dataTransfer)==null||e.setData("source",t==null?void 0:t.index.toString())}function De(l,t,e){let{$$slots:s={},$$scope:a}=t,{list:r}=t,o=!1;const u=Jt();function n(i){var d;(d=i.target.dataset)==null||d.id;const c=it(i.target);e(1,o=(c==null?void 0:c.id)??!1)}function f(i){const c=it(i.target);o===c.id&&e(1,o=!1)}function g(i){var d;e(1,o=!1);const c=it(i.target);L({from:(d=i.dataTransfer)==null?void 0:d.getData("source"),to:c.index})}const L=({from:i,to:c})=>{const d=[...r];d[i]=[d[c],d[c]=d[i]][0],u("sort",d)};return l.$$set=i=>{"list"in i&&e(0,r=i.list),"$$scope"in i&&e(5,a=i.$$scope)},[r,o,n,f,g,a,s]}class Ie extends Mt{constructor(t){super(),Vt(this,t,De,Pe,jt,{list:0})}}function Ot(l,t,e){const s=l.slice();return s[21]=t[e],s}function Rt(l){var yt,Ct,wt;let t,e="Edit your Profile",s,a,r,o,u,n,f=((yt=l[5])==null?void 0:yt.username)+"",g,L,i,c,d,j="Change photo",I,N,U,A,$,E,x,P,b,p=(Ct=l[5])!=null&&Ct.published?"Public profile":"Private profile",w,T,O,K,G,z,rt,et,q,_t,vt;z=new Ie({props:{list:(wt=l[5])==null?void 0:wt.links,$$slots:{default:[Ne,({item:h,index:v})=>({24:h,25:v}),({item:h,index:v})=>(h?16777216:0)|(v?33554432:0)]},$$scope:{ctx:l}}}),z.$on("sort",l[9]);function kt(h,v){return h[3]?Re:Oe}let ot=kt(l),V=ot(l);return{c(){t=y("h1"),t.textContent=e,s=S(),a=y("div"),r=y("p"),o=Z(`Profile Link:
          `),u=y("a"),n=Z("https://kung.foo/"),g=Z(f),i=S(),c=y("div"),d=y("a"),d.textContent=j,I=S(),N=y("a"),U=Z("Edit Bio"),$=S(),E=y("form"),x=y("label"),P=y("span"),b=y("div"),w=Z(p),T=S(),O=y("input"),G=S(),zt(z.$$.fragment),rt=S(),V.c(),et=ht(),this.h()},l(h){t=C(h,"H1",{class:!0,["data-svelte-h"]:!0}),Q(t)!=="svelte-zzls1r"&&(t.textContent=e),s=B(h),a=C(h,"DIV",{class:!0});var v=R(a);r=C(v,"P",{});var Y=R(r);o=tt(Y,`Profile Link:
          `),u=C(Y,"A",{href:!0,class:!0});var lt=R(u);n=tt(lt,"https://kung.foo/"),g=tt(lt,f),lt.forEach(m),Y.forEach(m),v.forEach(m),i=B(h),c=C(h,"DIV",{class:!0});var W=R(c);d=C(W,"A",{class:!0,href:!0,["data-svelte-h"]:!0}),Q(d)!=="svelte-uttol8"&&(d.textContent=j),I=B(W),N=C(W,"A",{class:!0,href:!0});var st=R(N);U=tt(st,"Edit Bio"),st.forEach(m),W.forEach(m),$=B(h),E=C(h,"FORM",{class:!0});var nt=R(E);x=C(nt,"LABEL",{class:!0});var X=R(x);P=C(X,"SPAN",{class:!0});var Lt=R(P);b=C(Lt,"DIV",{class:!0,"data-tip":!0});var Et=R(b);w=tt(Et,p),Et.forEach(m),Lt.forEach(m),T=B(X),O=C(X,"INPUT",{type:!0,class:!0}),X.forEach(m),nt.forEach(m),G=B(h),qt(z.$$.fragment,h),rt=B(h),V.l(h),et=ht(),this.h()},h(){var h,v;_(t,"class","mx-2 text-2xl font-bold mt-8 mb-4 text-center"),_(u,"href",L=`/${(h=l[5])==null?void 0:h.username}`),_(u,"class","link link-accent"),_(a,"class","text-center mb-8"),_(d,"class","btn btn-outline btn-xs"),_(d,"href","/signup/photo"),_(N,"class","btn btn-outline btn-xs"),_(N,"href",A=`/${l[5].username}/bio`),_(c,"class","text-center my-4"),_(b,"class","tooltip group-hover:tooltip-open"),_(b,"data-tip","If public, the world can see your profile"),_(P,"class","label-text mr-6"),_(O,"type","checkbox"),_(O,"class","toggle toggle-success"),O.checked=K=(v=l[5])==null?void 0:v.published,_(x,"class","label cursor-pointer flex items-start justify-center"),_(E,"class","form-control")},m(h,v){D(h,t,v),D(h,s,v),D(h,a,v),k(a,r),k(r,o),k(r,u),k(u,n),k(u,g),D(h,i,v),D(h,c,v),k(c,d),k(c,I),k(c,N),k(N,U),D(h,$,v),D(h,E,v),k(E,x),k(x,P),k(P,b),k(b,w),k(x,T),k(x,O),D(h,G,v),Ft(z,h,v),D(h,rt,v),V.m(h,v),D(h,et,v),q=!0,_t||(vt=M(O,"change",l[12]),_t=!0)},p(h,v){var lt,W,st,nt,X;(!q||v&32)&&f!==(f=((lt=h[5])==null?void 0:lt.username)+"")&&Pt(g,f),(!q||v&32&&L!==(L=`/${(W=h[5])==null?void 0:W.username}`))&&_(u,"href",L),(!q||v&32&&A!==(A=`/${h[5].username}/bio`))&&_(N,"href",A),(!q||v&32)&&p!==(p=(st=h[5])!=null&&st.published?"Public profile":"Private profile")&&Pt(w,p),(!q||v&32&&K!==(K=(nt=h[5])==null?void 0:nt.published))&&(O.checked=K);const Y={};v&32&&(Y.list=(X=h[5])==null?void 0:X.links),v&83886080&&(Y.$$scope={dirty:v,ctx:h}),z.$set(Y),ot===(ot=kt(h))&&V?V.p(h,v):(V.d(1),V=ot(h),V&&(V.c(),V.m(et.parentNode,et)))},i(h){q||(H(z.$$.fragment,h),q=!0)},o(h){J(z.$$.fragment,h),q=!1},d(h){h&&(m(t),m(s),m(a),m(i),m(c),m($),m(E),m(G),m(rt),m(et)),Ht(z,h),V.d(h),_t=!1,vt()}}}function Ne(l){let t,e,s,a,r="Delete",o,u,n;const f=[l[24]];let g={};for(let i=0;i<f.length;i+=1)g=Zt(g,f[i]);e=new ue({props:g});function L(){return l[14](l[24])}return{c(){t=y("div"),zt(e.$$.fragment),s=S(),a=y("button"),a.textContent=r,this.h()},l(i){t=C(i,"DIV",{class:!0});var c=R(t);qt(e.$$.fragment,c),s=B(c),a=C(c,"BUTTON",{class:!0,["data-svelte-h"]:!0}),Q(a)!=="svelte-1n5cbwc"&&(a.textContent=r),c.forEach(m),this.h()},h(){_(a,"class","btn btn-xs btn-error invisible group-hover:visible transition-all absolute -right-6 bottom-10"),_(t,"class","group relative")},m(i,c){D(i,t,c),Ft(e,t,null),k(t,s),k(t,a),o=!0,u||(n=M(a,"click",L),u=!0)},p(i,c){l=i;const d=c&16777216?ce(f,[fe(l[24])]):{};e.$set(d)},i(i){o||(H(e.$$.fragment,i),o=!0)},o(i){J(e.$$.fragment,i),o=!1},d(i){i&&m(t),Ht(e),u=!1,n()}}}function Oe(l){let t,e="Add a Link",s,a;return{c(){t=y("button"),t.textContent=e,this.h()},l(r){t=C(r,"BUTTON",{class:!0,["data-svelte-h"]:!0}),Q(t)!=="svelte-1l5hg7j"&&(t.textContent=e),this.h()},h(){_(t,"class","btn btn-outline btn-info block mx-auto my-4")},m(r,o){D(r,t,o),s||(a=M(t,"click",l[18]),s=!0)},p:F,d(r){r&&m(t),s=!1,a()}}}function Re(l){let t,e,s,a,r,o,u,n,f,g,L,i,c,d,j,I,N="Cancel",U,A,$=dt(l[7]),E=[];for(let p=0;p<$.length;p+=1)E[p]=St(Ot(l,$,p));let x=!l[0]&&Bt(),P=!l[1]&&Ut(),b=l[4]&&$t();return{c(){t=y("form"),e=y("select");for(let p=0;p<E.length;p+=1)E[p].c();s=S(),a=y("input"),r=S(),o=y("input"),u=S(),n=y("div"),x&&x.c(),f=S(),P&&P.c(),g=S(),b&&b.c(),L=S(),i=y("button"),c=Z("Add Link"),j=S(),I=y("button"),I.textContent=N,this.h()},l(p){t=C(p,"FORM",{class:!0});var w=R(t);e=C(w,"SELECT",{name:!0,class:!0});var T=R(e);for(let G=0;G<E.length;G+=1)E[G].l(T);T.forEach(m),s=B(w),a=C(w,"INPUT",{name:!0,type:!0,placeholder:!0,class:!0}),r=B(w),o=C(w,"INPUT",{name:!0,type:!0,placeholder:!0,class:!0}),u=B(w),n=C(w,"DIV",{class:!0});var O=R(n);x&&x.l(O),f=B(O),P&&P.l(O),g=B(O),b&&b.l(O),O.forEach(m),L=B(w),i=C(w,"BUTTON",{type:!0,class:!0});var K=R(i);c=tt(K,"Add Link"),K.forEach(m),j=B(w),I=C(w,"BUTTON",{type:!0,class:!0,["data-svelte-h"]:!0}),Q(I)!=="svelte-ptz3kb"&&(I.textContent=N),w.forEach(m),this.h()},h(){_(e,"name","icon"),_(e,"class","select select-sm"),l[2].icon===void 0&&ee(()=>l[15].call(e)),_(a,"name","title"),_(a,"type","text"),_(a,"placeholder","Title"),_(a,"class","input input-sm"),_(o,"name","url"),_(o,"type","text"),_(o,"placeholder","URL"),_(o,"class","input input-sm"),_(n,"class","my-4"),i.disabled=d=!l[4],_(i,"type","submit"),_(i,"class","btn btn-success block"),_(I,"type","button"),_(I,"class","btn btn-xs my-4"),_(t,"class","bg-base-200 p-6 w-full mx-auto rounded-xl")},m(p,w){D(p,t,w),k(t,e);for(let T=0;T<E.length;T+=1)E[T]&&E[T].m(e,null);Tt(e,l[2].icon,!0),k(t,s),k(t,a),at(a,l[2].title),k(t,r),k(t,o),at(o,l[2].url),k(t,u),k(t,n),x&&x.m(n,null),k(n,f),P&&P.m(n,null),k(n,g),b&&b.m(n,null),k(t,L),k(t,i),k(i,c),k(t,j),k(t,I),U||(A=[M(e,"change",l[15]),M(a,"input",l[16]),M(o,"input",l[17]),M(I,"click",l[13]),M(t,"submit",mt(l[10]))],U=!0)},p(p,w){if(w&128){$=dt(p[7]);let T;for(T=0;T<$.length;T+=1){const O=Ot(p,$,T);E[T]?E[T].p(O,w):(E[T]=St(O),E[T].c(),E[T].m(e,null))}for(;T<E.length;T+=1)E[T].d(1);E.length=$.length}w&132&&Tt(e,p[2].icon),w&132&&a.value!==p[2].title&&at(a,p[2].title),w&132&&o.value!==p[2].url&&at(o,p[2].url),p[0]?x&&(x.d(1),x=null):x||(x=Bt(),x.c(),x.m(n,f)),p[1]?P&&(P.d(1),P=null):P||(P=Ut(),P.c(),P.m(n,g)),p[4]?b||(b=$t(),b.c(),b.m(n,null)):b&&(b.d(1),b=null),w&16&&d!==(d=!p[4])&&(i.disabled=d)},d(p){p&&m(t),le(E,p),x&&x.d(),P&&P.d(),b&&b.d(),U=!1,At(A)}}}function St(l){let t,e=l[21]+"",s;return{c(){t=y("option"),s=Z(e),this.h()},l(a){t=C(a,"OPTION",{});var r=R(t);s=tt(r,e),r.forEach(m),this.h()},h(){t.__value=l[21].toLowerCase(),at(t,t.__value)},m(a,r){D(a,t,r),k(t,s)},p:F,d(a){a&&m(t)}}}function Bt(l){let t,e="Must have valid title";return{c(){t=y("p"),t.textContent=e,this.h()},l(s){t=C(s,"P",{class:!0,["data-svelte-h"]:!0}),Q(t)!=="svelte-1clkdjx"&&(t.textContent=e),this.h()},h(){_(t,"class","text-error text-xs")},m(s,a){D(s,t,a)},d(s){s&&m(t)}}}function Ut(l){let t,e="Must have a valid URL";return{c(){t=y("p"),t.textContent=e,this.h()},l(s){t=C(s,"P",{class:!0,["data-svelte-h"]:!0}),Q(t)!=="svelte-ckpz19"&&(t.textContent=e),this.h()},h(){_(t,"class","text-error text-xs")},m(s,a){D(s,t,a)},d(s){s&&m(t)}}}function $t(l){let t,e="Looks good!";return{c(){t=y("p"),t.textContent=e,this.h()},l(s){t=C(s,"P",{class:!0,["data-svelte-h"]:!0}),Q(t)!=="svelte-18u4utf"&&(t.textContent=e),this.h()},h(){_(t,"class","text-success text-xs")},m(s,a){D(s,t,a)},d(s){s&&m(t)}}}function Se(l){var a;let t,e,s=((a=l[5])==null?void 0:a.username)==l[6].params.username&&Rt(l);return{c(){t=y("main"),s&&s.c(),this.h()},l(r){t=C(r,"MAIN",{class:!0});var o=R(t);s&&s.l(o),o.forEach(m),this.h()},h(){_(t,"class","max-w-xl mx-auto")},m(r,o){D(r,t,o),s&&s.m(t,null),e=!0},p(r,[o]){var u;((u=r[5])==null?void 0:u.username)==r[6].params.username?s?(s.p(r,o),o&96&&H(s,1)):(s=Rt(r),s.c(),H(s,1),s.m(t,null)):s&&(bt(),J(s,1,1,()=>{s=null}),gt())},i(r){e||(H(s),e=!0)},o(r){J(s),e=!1},d(r){r&&m(t),s&&s.d()}}}function Be(l,t,e){let s,a,r,o,u,n,f;ut(l,de,b=>e(5,o=b)),ut(l,_e,b=>e(19,u=b)),ut(l,he,b=>e(6,f=b));const g=["Twitter","YouTube","TikTok","LinkedIn","GitHub","Custom"],L={icon:"custom",title:"",url:"https://"},i=ve(L);ut(l,i,b=>e(2,n=b));let c=!1;function d(b){const p=b.detail,w=ct(ft,"users",u.uid);pe(w,{links:p},{merge:!0})}async function j(b){const p=ct(ft,"users",u.uid);await pt(p,{links:me({...n,id:Date.now().toString()})}),i.set({icon:"",title:"",url:""}),e(3,c=!1)}async function I(b){const p=ct(ft,"users",u.uid);await pt(p,{links:be(b)})}async function N(b){const p=ct(ft,"users",u.uid);await pt(p,{published:!(o!=null&&o.published)})}function U(){i.set(L),e(3,c=!1)}const A=b=>I(b);function $(){n.icon=te(this),i.set(n),e(7,g)}function E(){n.title=this.value,i.set(n),e(7,g)}function x(){n.url=this.value,i.set(n),e(7,g)}const P=()=>e(3,c=!0);return l.$$.update=()=>{l.$$.dirty&4&&e(1,s=n.url.match(/^(ftp|http|https):\/\/[^ "]+$/)),l.$$.dirty&4&&e(0,a=n.title.length<20&&n.title.length>0),l.$$.dirty&3&&e(4,r=s&&a)},[a,s,n,c,r,o,f,g,i,d,j,I,N,U,A,$,E,x,P]}class qe extends Mt{constructor(t){super(),Vt(this,t,Be,Se,jt,{})}}export{qe as component};
